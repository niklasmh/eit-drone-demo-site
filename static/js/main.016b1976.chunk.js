(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,n){e.exports=n(352)},149:function(e,t,n){},151:function(e,t,n){},350:function(e,t,n){},352:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),s=n(55),r=n.n(s),a=(n(149),n(56)),m=n(57),l=n(59),u=n(58),p=n(60),c=(n(151),n(18)),d=n(13),h=(n(350),Object(d.withScriptjs)(Object(d.withGoogleMap)(function(e){return i.a.createElement(d.GoogleMap,{options:{draggable:!1},onClick:e.onClick,defaultZoom:12,defaultCenter:{lat:63.4189785,lng:10.4026859}},e.paths,e.droneLines,e.markers,e.persons,e.ambulances,e.drones,i.a.createElement(d.Marker,{position:e.stations[0],defaultIcon:{url:"http://icons.iconarchive.com/icons/icons-land/gis-gps-map/256/Hospital-icon.png",anchor:{x:25,y:25},scaledSize:{width:50,height:50}}}))}))),L=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={selectedPoint:{lat:0,lng:0},situations:[],stations:[{drones:0,lat:63.420457,lng:10.3904378},{drones:0,lat:63.4173341,lng:10.3540778},{drones:0,lat:63.4179966,lng:10.3518891},{drones:0,lat:63.3982869,lng:10.3971434},{drones:0,lat:63.4031339,lng:10.427388},{drones:0,lat:63.3874465,lng:10.3301954},{drones:0,lat:63.4096514,lng:10.4184723},{drones:0,lat:63.3951255,lng:10.3692269},{drones:0,lat:63.3933766,lng:10.3718019},{drones:0,lat:63.4094977,lng:10.4439425},{drones:0,lat:63.3911854,lng:10.4300809},{drones:0,lat:63.4249907,lng:10.4420114},{drones:0,lat:63.4311337,lng:10.4508948},{drones:0,lat:63.4347805,lng:10.4143739},{drones:0,lat:63.4344063,lng:10.4130435},{drones:0,lat:63.4334658,lng:10.3962421},{drones:0,lat:63.4313689,lng:10.39783},{drones:0,lat:63.4302508,lng:10.3935385},{drones:0,lat:63.4306683,lng:10.39621}],type:"stroke"},n.timeInterval=100,n.maxAmbulances=1,n.maxDronesPerStation=1,n.speedup=10,n.ambulanceSpeed=200*n.speedup,n.droneSpeed=80*n.speedup,n.stationIcon={url:"https://cdn2.iconfinder.com/data/icons/large-home-icons/512/Drugstore_store_pharmacy_medicine_hospital.png",anchor:{x:15,y:25},scaledSize:{width:30,height:30}},n.droneIcon={url:"https://png.pngtree.com/svg/20161124/uav_110217.png",anchor:{x:15,y:15},scaledSize:{width:30,height:30}},n.ambulanceIcon={url:"http://icons.iconarchive.com/icons/google/noto-emoji-travel-places/1024/42545-ambulance-icon.png",anchor:{x:15,y:15},scaledSize:{width:30,height:30}},n.typeIcons={heroin:{url:"https://static.thenounproject.com/png/641158-200.png",anchor:{x:15,y:15},scaledSize:{width:30,height:30}},stroke:{url:"https://static.thenounproject.com/png/893753-200.png",anchor:{x:15,y:15},scaledSize:{width:30,height:30}},strokeFixed:{url:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/Person_icon_BLACK-01.svg/2000px-Person_icon_BLACK-01.svg.png",anchor:{x:15,y:25},scaledSize:{width:30,height:30}}},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"onClick",value:function(e){var t=this,n=e.latLng.lat(),o=e.latLng.lng(),i={lat:n,lng:o};if(this.setState(Object(c.a)({},this.state,{selectedPoint:i})),"stroke"===this.state.type){(new window.google.maps.DirectionsService).route({origin:new window.google.maps.LatLng(63.420457,10.3904378),destination:new window.google.maps.LatLng(n,o),travelMode:window.google.maps.TravelMode.DRIVING},function(e,n){if(n===window.google.maps.DirectionsStatus.OK){var o=t.state.situations.slice(0),s=-1,r=t.nearestStation(i),a=r.index,m=r.dist;m/t.droneSpeed<e.routes[0].legs[0].distance.value/t.ambulanceSpeed&&(s=a);var l=t.state.stations.slice(0);~s&&l[s].drones++,o.push({path:e,position:i,time:0,done:!1,waitForAmbulance:t.state.situations.filter(function(e){return~e.totalDistance}).length>=t.maxAmbulances,drone:{station:s,dist:m,progress:0,done:!1,time:0},totalDistance:e.routes[0].legs[0].distance.value,totalDuration:e.routes[0].legs[0].duration.value,pointsInPath:e.routes[0].overview_path.length,type:t.state.type}),t.setState(Object(c.a)({},t.state,{situations:o}))}})}else{var s=this.state.situations.slice(0),r=this.nearestStation(i),a=r.index,m=r.dist,l=this.state.stations.slice(0);~a&&l[a].drones++,s.push({path:null,position:i,time:0,done:!1,waitForAmbulance:!1,drone:{station:a,dist:m,progress:0,done:!1,time:0},totalDistance:-1,totalDuration:-1,pointsInPath:0,type:this.state.type}),this.setState(Object(c.a)({},this.state,{situations:s}))}}},{key:"nearestStation",value:function(e){var t=this,n=1/0,o=-1;return this.state.stations.forEach(function(i,s){var r=window.google.maps.geometry.spherical.computeDistanceBetween({lat:function(){return i.lat},lng:function(){return i.lng}},{lat:function(){return e.lat},lng:function(){return e.lng}});n>r&&i.drones<t.maxDronesPerStation&&(n=r,o=s)}),{index:o,dist:n}}},{key:"componentDidMount",value:function(){var e=this;setInterval(function(){var t=e.state.stations,n=e.state.situations.map(function(n){var o=n.done?-1:1,i=n.drone.done?-1:1,s=n.drone.done&&n.drone.time/1e3*e.droneSpeed/3.6/n.drone.dist<=0;return~n.drone.station&&s&&t[n.drone.station].drones--,Object(c.a)({},n,{time:n.time+e.timeInterval*o*(~n.totalDistance?1:0),drone:Object(c.a)({},n.drone,{time:n.drone.time+e.timeInterval*i*(~n.drone.station?1:0),done:n.drone.done||(n.drone.time+e.timeInterval*i)/1e3*e.droneSpeed/3.6/n.drone.dist>=1,station:s?-1:n.drone.station}),done:n.done||(n.time+e.timeInterval*o)/1e3*e.ambulanceSpeed/3.6/n.totalDistance>=1})}).filter(function(t){return~t.totalDistance?!(t.done&&t.time/1e3*e.ambulanceSpeed/3.6/t.totalDistance<=0):~t.drone.station||t.waitForAmbulance});e.setState(Object(c.a)({},e.state,{situations:n,stations:t}))},this.timeInterval)}},{key:"handleRadioSelect",value:function(e){this.setState(Object(c.a)({},this.state,{type:e}))}},{key:"render",value:function(){var e=this,t=this.state.stations.map(function(t,n){return i.a.createElement(d.Marker,{position:t,key:n,defaultIcon:e.stationIcon})}),n=this.state.situations.filter(function(e){return!e.done&&null!==e.path}).map(function(e,t){return i.a.createElement(d.DirectionsRenderer,{directions:e.path,key:t,options:{preserveViewport:!0,suppressMarkers:!0}})}),o=this.state.situations.filter(function(e){return!e.drone.done&&~e.drone.station}).map(function(t,n){return i.a.createElement(d.Polyline,{path:[e.state.stations[t.drone.station],t.position],key:n})}),s=this.state.situations.filter(function(e){return"stroke"===e.type&&(e.waitForAmbulance||!e.done)||"heroin"===e.type&&!e.drone.done}).map(function(t,n){var o=t.type;return"stroke"===t.type&&t.drone.done&&(o="strokeFixed"),i.a.createElement(d.Marker,{key:n,position:t.position,icon:e.typeIcons[o]})}),r=this.state.situations.filter(function(e){return~e.totalDistance}).map(function(t,n){var o=t.time/1e3*e.ambulanceSpeed/3.6/t.totalDistance,s=Math.min(t.pointsInPath-2,parseInt(o*t.pointsInPath)),r=o*t.pointsInPath-s,a=t.path.routes[0].overview_path[s].lat(),m=t.path.routes[0].overview_path[s].lng(),l=t.path.routes[0].overview_path[s+1].lat(),u=t.path.routes[0].overview_path[s+1].lng();return i.a.createElement(d.Marker,{key:n,position:{lat:a+(l-a)*r,lng:m+(u-m)*r},defaultIcon:e.ambulanceIcon})}),a=this.state.situations.filter(function(e){return~e.drone.station}).map(function(t,n){var o=t.drone.time/1e3*e.droneSpeed/3.6/t.drone.dist,s=e.state.stations[t.drone.station].lat,r=e.state.stations[t.drone.station].lng,a=t.position.lat,m=t.position.lng;return i.a.createElement(d.Marker,{key:n,position:{lat:s+(a-s)*o,lng:r+(m-r)*o},defaultIcon:e.droneIcon})});return i.a.createElement("div",{id:"map"},i.a.createElement("span",null,"Ambulanser ledig:"," ",this.maxAmbulances-this.state.situations.filter(function(e){return~e.totalDistance}).length," ","/ ",this.maxAmbulances),i.a.createElement("span",null,"Situasjoner: ",this.state.situations.length),i.a.createElement("input",{type:"radio",name:"type",defaultChecked:!0,id:"stroke",onChange:function(){return e.handleRadioSelect("stroke")}}),i.a.createElement("label",{htmlFor:"stroke"},"Hjerteinfarkt"),i.a.createElement("input",{type:"radio",name:"type",id:"heroin",onChange:function(){return e.handleRadioSelect("heroin")}}),i.a.createElement("label",{htmlFor:"heroin"},"Heroinoverdose"),i.a.createElement(h,{markers:t,paths:n,persons:s,ambulances:r,drones:a,droneLines:o,stations:this.state.stations,selected:this.state.selectedPoint,onClick:this.onClick.bind(this),googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyD_QcAdoHfUZgyxnB66tYyRUm6yF759J_o&v=3.exp&libraries=geometry,drawing,places",loadingElement:i.a.createElement("div",{style:{height:"100%"}}),containerElement:i.a.createElement("div",{style:{height:"100vh"}}),mapElement:i.a.createElement("div",{style:{height:"100%"}})}))}}]),t}(o.Component),g=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={showDemo:!0},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Effektivisere Akutten med Droner"),i.a.createElement("p",null,"Dette er en alternativ presentasjonsform i EiT fra gruppe 5 i landsbyen for Fremtidens Smarte Sykehus."),i.a.createElement("p",null,"Nettsiden inneholder:"),i.a.createElement("ol",null,i.a.createElement("li",null,i.a.createElement("a",{href:"#demo"},"Interaktiv demo av l\xf8sning")),i.a.createElement("li",null,i.a.createElement("a",{href:"#description"},"Beskrivelse av problemet med effektivitet i akutt")),i.a.createElement("li",null,i.a.createElement("a",{href:"#solution"},"L\xf8sning med droner"))),i.a.createElement("h2",{id:"demo"},"Interaktiv demo av l\xf8sning"),i.a.createElement("a",{id:"play",href:"#map"},"Start"),this.state.showDemo?i.a.createElement(L,null):null,i.a.createElement("h2",{id:"description"},"Beskrivelse av problemet med effektivitet i akutt"),i.a.createElement("p",null,i.a.createElement("i",null,"Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsumLorem ipsumLorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsumLorem ipsumLorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsumLorem ipsumLorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum")),i.a.createElement("p",null,i.a.createElement("i",null,"Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsumLorem ipsumLorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum")),i.a.createElement("h2",{id:"solution"},"L\xf8sning med droner"),i.a.createElement("p",null,i.a.createElement("i",null,"Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsumLorem ipsumLorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsumLorem ipsumLorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsumLorem ipsumLorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum")),i.a.createElement("p",null,i.a.createElement("i",null,"Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLorem ipsumLorem ipsumLorem ipsum Lorem ipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum Lorem ipsumLipsum Lorem ipsum Lorem ipsumLorem ipsum Lorem ipsum")))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[144,2,1]]]);
//# sourceMappingURL=main.016b1976.chunk.js.map